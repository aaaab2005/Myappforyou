<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8" />
<title>For My Boo</title>

<!-- Firebase -->
<script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js"></script>

<style>

/* ğŸ”¥ ØªÙƒØ¨ÙŠØ± Ø¢Ù…Ù† Ù…Ø§ ÙŠÙ…Ù†Ø¹Ø´ Ø§Ù„Ø¶ØºØ· */
body {
    transform: scale(1.15);
    transform-origin: top center;
}

body {
    background: #ffd6e8;
    font-family: "Tahoma";
    text-align: center;
    padding: 20px;
    color: #b3005c;
}

h1 { font-size: 36px; }

.section {
    background: #ffffffaa;
    padding: 15px;
    margin-top: 20px;
    border-radius: 15px;
    box-shadow: 0 0 8px #ff9ec9;
}

.counter {
    font-size: 30px;
    font-weight: bold;
    margin-top: 10px;
}

input, button {
    width: 90%;
    padding: 12px;
    border-radius: 10px;
    border: none;
    margin-top: 10px;
    font-size: 18px;
}

button {
    background: #ff5fa2;
    color: white;
    cursor: pointer;
}

.emoji-choice span {
    font-size: 40px;
    margin: 10px;
    cursor: pointer;
}

.bubble {
    margin: 8px 0;
    padding: 10px;
    border-radius: 12px;
    background: #ffe0ef;
    text-align: right;
    width: fit-content;
    max-width: 80%;
}

</style>
</head>

<body>

<h1>For My Boo ğŸ’—</h1>

<!-- Ø¹Ø¯Ø§Ø¯ Ø§Ù„Ø­Ø¨ -->
<div class="section">
    <h2>Ø¹Ø¯Ø§Ø¯ Ø§Ù„Ø­Ø¨ â¤ï¸</h2>
    <div class="counter" id="counter">...</div>

    <input id="yearsInput" type="number" placeholder="Ø¹Ø¯Ø¯ Ø§Ù„Ø³Ù†ÙˆØ§Øª">
    <input id="monthsInput" type="number" placeholder="Ø¹Ø¯Ø¯ Ø§Ù„Ø£Ø´Ù‡Ø±">
    <input id="daysInput" type="number" placeholder="Ø¹Ø¯Ø¯ Ø§Ù„Ø£ÙŠØ§Ù…">
    <button onclick="setCustomStartDate()">ØªØºÙŠÙŠØ± Ø§Ù„Ø¹Ø¯Ø§Ø¯ ÙŠØ¯ÙˆÙŠÙ‹Ø§</button>
</div>

<!-- Ù…Ø²Ø§Ø¬ Ø§Ù„ÙŠÙˆÙ… -->
<div class="section">
    <h2>ÙƒÙŠÙ Ø­Ø§Ù„Ùƒ Ø§Ù„ÙŠÙˆÙ… ØŸ</h2>

    <div id="moodResult" style="font-size:25px;margin-bottom:10px;"></div>

    <div class="emoji-choice" id="emojiChoices">
        <span onclick="pickMood('ğŸ˜­')">ğŸ˜­</span>
        <span onclick="pickMood('â¤ï¸')">â¤ï¸</span>
        <span onclick="pickMood('ğŸ¤')">ğŸ¤</span>
    </div>
</div>

<!-- Ø±Ø³Ø§Ù„Ø© Ø§Ù„ÙŠÙˆÙ… -->
<div class="section">
    <h2>Ø±Ø³Ø§Ù„Ø© Ø§Ù„ÙŠÙˆÙ… ğŸ’Œ</h2>
    <div id="dailyMessage"></div>
</div>

<!-- Ù„ØºØ² Ø§Ù„ÙŠÙˆÙ… -->
<div class="section">
    <h2>Ù„ØºØ² Ø§Ù„ÙŠÙˆÙ… ğŸ§©</h2>
    <div id="puzzleQuestion"></div>
    <input id="puzzleAnswer" placeholder="Ø§ÙƒØªØ¨ÙŠ Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø© Ù‡Ù†Ø§">
    <button onclick="checkPuzzle()">ØªØ­Ù‚Ù‘Ù‚</button>
    <div id="puzzleResult" style="margin-top:10px;font-weight:bold;"></div>
</div>

<!-- Ø§Ù„Ø¯Ø±Ø¯Ø´Ø© -->
<div class="section">
    <h2>Ø§Ù„Ø¯Ø±Ø¯Ø´Ø© ğŸ’¬</h2>

    <div id="chatBox"
         style="height:250px; overflow-y:auto; border:1px solid #ff8dc6; padding:10px; border-radius:10px; background:#fff;">
    </div>

    <input id="chatInput" placeholder="Ø§ÙƒØªØ¨ÙŠ Ø±Ø³Ø§Ù„Ø©...">
    <button onclick="sendMessage()">Ø¥Ø±Ø³Ø§Ù„</button>
</div>




<script>

/* Firebase Config */
const firebaseConfig = {
  apiKey: "AAAAA",
  authDomain: "AAAAA.firebaseapp.com",
  projectId: "AAAAA",
  storageBucket: "AAAAA.appspot.com",
  messagingSenderId: "AAAAA",
  appId: "AAAAA"
};

firebase.initializeApp(firebaseConfig);
const db = firebase.firestore();

/* Ø§Ù„Ø±Ø³Ø§Ø¦Ù„ Ø§Ù„ÙŠÙˆÙ…ÙŠØ© */
const messages = [
"Ø¹Ù„Ø§Ø¨Ø§Ù„Ùƒ Ø´ÙˆØ§ ÙƒÙ†Ø¯ÙŠØ± Ø¯Ø±Ùƒ ØŸ Ù†Ø®Ù…Ù… ÙÙŠÙƒğŸ’­ğŸ’—",
"Ù„ÙˆÙƒØ§Ù† Ø¬ÙŠØª Ù‚Ø·Ø© ØªÚ¤ÙˆÙ„ÙŠ pspsps ğŸ™„ğŸ˜”",
"Ù†ØªØ§ Ø£Ø¬Ù…Ù„ Ø­Ø§Ø¬Ø© ØµØ±Ø§ØªÙ„ÙŠ ğŸ«¶ğŸ»â¤ï¸",
"Ø¹Ø¬Ø¨ØªÙƒ l\"app Ù‡Ø§Ø¯ÙŠØŸ Ø¯Ø±ØªÙ‡Ø§ Ø¨Ø§Ø´ Ù†ÙØ±Ø­Ùƒ ğŸ©·",
"Ù†Ø­Ø¨Ùƒ Ù…Ø§Ù… Ù…Ù†Ú¤ÙˆÙ„Ù‡Ø§Ø´ ÙƒÙ„ Ù†Ù‡Ø§Ø± ğŸ˜­ğŸ’—",
"Bcc coucou saha 3idkom ğŸ˜‚ğŸ˜‚",
"Ù†Ù‡Ø§Ø± Ø¯ÙŠ Ø¹Ø±ÙØªÙƒ ÙÙŠÙ‡ Ù…Ù†Ø³ÙŠØªÙˆØ´ ÙŠØ¨Ø§Ù† ÙƒØ§Ù† Ù„Ø¨Ø§Ø±Ø­ ğŸ˜©",
"Ø´ÙˆØ§ Ú¤Ø§Ø¹Ø¯ Ø¯ÙŠØ±ØŸ ØªÙˆØ­Ø´ØªÙŠÙ†ÙŠ ğŸ™„",
"Ù„ÙˆÙƒØ§Ù† Ù†ØªØ®Ø§ØµÙ…Ùˆ ØªØ³ÙˆØ¨Ø±ÙŠÙ…ÙŠ for my boo ÙˆÙ„Ø§ ØªØ®Ù„ÙŠÙ‡Ø§ ğŸ¤§",
"Ø§ÙˆÙ„ Ù…Ø±Ø© Ù†Ø¯ÙŠØ± app ÙØ­ÙŠØ§ØªÙŠ ÙˆØ¯Ø±ØªÙ‡Ø§ Ø¹Ù„Ù‰ Ø¬Ø§Ù„Ùƒ ğŸ˜”ğŸ’—",
"Ily !ğŸ©·",
"ØªØ¹Ø¬Ø¨Ùƒ ÙƒÙ„Ù…Ø© best friend ØŸ Ù†ØªØ§ best friend ØªØ§Ø¹ÙŠ ğŸ£",
"ÙƒÙˆØªÙŠ ÙƒÙˆØªÙŠ ÙŠØ§ Ø®Ù„Ø§ØµÙˆ ğŸ‘¶ğŸ»",
"Ù…Ù„Ú¤ÙŠØªØ´ Ø´ÙˆØ§ Ù†Ú¤ÙˆÙ„Ùƒ Ù„ÙŠÙˆÙ… ğŸ˜¬",
"Ù„ÙˆÙƒØ§Ù† Ø¬ÙŠØª ÙØ±Ø§Ø´Ø© ØªØµÙŠØ¯Ù†ÙŠØŸ ğŸ˜‘",
"Ú¤Ø¯Ø§Ù‡ Ø¹Ù…Ø±Ù†Ø§ Ù„ÙŠÙˆÙ… ØŸ Ø¬Ø§ÙˆØ¨ ÙÙ„Ù†Ø³Ø·Ø§ ğŸ™„",
"ÙƒÙŠ ØªØºÙ…Ø¶ Ø¹ÙŠÙ†ÙŠÙƒ Ùˆ ØªØªØ®ÙŠÙ„ Ø§Ù„Ù…Ø³ØªÙ‚Ø¨Ù„â€¦ ØªØ´ÙˆÙÙ†ÙŠ Ù…Ø¹Ø§ÙƒØŸ"
];

function loadDailyMessage() {
    let lastTime = localStorage.getItem("msgTime");
    let msgIndex = localStorage.getItem("msgIndex");

    let now = Date.now();

    if (!lastTime || now - lastTime >= 86400000) {
        msgIndex = Math.floor(Math.random() * messages.length);
        localStorage.setItem("msgIndex", msgIndex);
        localStorage.setItem("msgTime", now);
    }

    document.getElementById("dailyMessage").innerHTML =
        messages[msgIndex];
}
loadDailyMessage();

/* Ù…Ø²Ø§Ø¬ Ø§Ù„ÙŠÙˆÙ… */
function pickMood(emoji) {
    db.collection("appData").doc("mood").set({
        mood: emoji,
        time: Date.now()
    });

    document.getElementById("moodResult").innerHTML = "Ù…Ø²Ø§Ø¬Ùƒ: " + emoji;
    document.getElementById("emojiChoices").style.display = "none";
}

db.collection("appData").doc("mood")
.onSnapshot((doc) => {
    if (doc.exists) {
        let data = doc.data();
        document.getElementById("moodResult").innerHTML =
            "Ù…Ø²Ø§Ø¬ Ø§Ù„ÙŠÙˆÙ…: " + data.mood;
        document.getElementById("emojiChoices").style.display = "none";
    }
});

/* Ø§Ù„Ø¹Ø¯Ø§Ø¯ */
let savedStart = localStorage.getItem("customStartDate");
let startDate = savedStart ? new Date(savedStart) : new Date();

function updateCounter() {
    let now = new Date();

    let years  = now.getFullYear() - startDate.getFullYear();
    let months = now.getMonth()    - startDate.getMonth();
    let days   = now.getDate()     - startDate.getDate();

    if (days < 0) { months--; days += 30; }
    if (months < 0) { years--; months += 12; }

    document.getElementById("counter").innerHTML =
        years + " Ø³Ù†Ø© â€¢ " + months + " Ø´Ù‡Ø± â€¢ " + days + " ÙŠÙˆÙ…";
}
setInterval(updateCounter, 1000);
updateCounter();

function setCustomStartDate() {
    let y = +document.getElementById("yearsInput").value || 0;
    let m = +document.getElementById("monthsInput").value || 0;
    let d = +document.getElementById("daysInput").value || 0;

    let now = new Date();
    let customStart = new Date(now);
    customStart.setFullYear(now.getFullYear() - y);
    customStart.setMonth(now.getMonth() - m);
    customStart.setDate(now.getDate() - d);

    localStorage.setItem("customStartDate", customStart.toISOString());
    startDate = customStart;
    alert("ØªÙ… ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¹Ø¯Ø§Ø¯ â¤ï¸");
}

/* Ù„ØºØ² Ø§Ù„ÙŠÙˆÙ… */
const puzzles = [
    { q: "ÙŠÙ…Ø´ÙŠ Ø¨Ù„Ø§ Ù‚Ø¯Ù…ÙŠÙ†ØŸ", a: "Ø§Ù„ÙˆÙ‚Øª" },
    { q: "Ø´ÙŠØ¡ Ø¥Ø°Ø§ Ø£Ø®Ø°Øª Ù…Ù†Ù‡ ÙƒØ¨Ø±ØŸ", a: "Ø§Ù„Ø­ÙØ±Ø©" },
    { q: "ÙŠØ±Ù‰ ÙˆÙ„ÙŠØ³ Ù„Ù‡ Ø¹ÙŠÙˆÙ†ØŸ", a: "Ø§Ù„Ù…Ø±Ø¢Ø©" }
];

let puzzle = puzzles[Math.floor(Math.random() * puzzles.length)];
document.getElementById("puzzleQuestion").innerHTML = puzzle.q;

function checkPuzzle() {
    let ans = document.getElementById("puzzleAnswer").value.trim();
    document.getElementById("puzzleResult").innerHTML =
        ans === puzzle.a ? "ØµØ­ÙŠØ­ â¤ï¸ğŸ‘" : "ØºÙ„Ø· ğŸ˜¢";
}

/* Ø¨ÙˆØª Ø¯Ø§Ø®Ù„ Ø§Ù„Ø´Ø§Øª */
function botReply(userMsg) {
    userMsg = userMsg.toLowerCase();

    if (userMsg.includes("boo")) return "Ù†Ø¹Ù… Ø­Ø¨ÙŠØŸ ğŸ’—";
    if (userMsg.includes("love")) return "I love you too ğŸ˜­â¤ï¸";
    if (userMsg.includes("miss")) return "Ø­ØªÙ‰ Ø£Ù†Ø§ ØªÙˆØ­Ø´ØªÙƒ Ø¨Ø²Ø§Ù ğŸ˜”ğŸ©·";
    if (userMsg.includes("hey")) return "Heyy baby ğŸ’—âœ¨";

    return null;
}

/* Ø§Ù„Ø´Ø§Øª Ø§Ù„Ø­Ù‚ÙŠÙ‚ÙŠ */
function sendMessage() {
    let msg = document.getElementById("chatInput").value.trim();
    if (msg === "") return;

    // Ø±Ø³Ø§Ù„Ø© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…
    db.collection("chat").add({
        text: msg,
        time: Date.now()
    });

    document.getElementById("chatInput").value = "";

    // Ø±Ø¯Ù‘ Ø§Ù„Ø¨ÙˆØª
    let reply = botReply(msg);
    if (reply) {
        db.collection("chat").add({
            text: "Bot: " + reply,
            time: Date.now() + 1
        });
    }
}

db.collection("chat")
  .orderBy("time")
  .onSnapshot(snapshot => {
      let chatBox = document.getElementById("chatBox");
      chatBox.innerHTML = "";

      snapshot.forEach(doc => {
          let data = doc.data();
          let div = document.createElement("div");
          div.className = "bubble";
          div.innerHTML = data.text;
          chatBox.appendChild(div);
      });

      chatBox.scrollTop = chatBox.scrollHeight;
  });

</script>

</body>
</html>
