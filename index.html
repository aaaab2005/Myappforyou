<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8" />
<title>For My Boo</title>

<style>
    body {
        background: #ffd6e8;
        font-family: "Tahoma";
        text-align: center;
        padding: 20px;
        color: #b3005c;
        font-size: 26px;
    }
    h1 {
        font-size: 40px;
        font-weight: bold;
    }
    .counter {
        font-size: 34px;
        margin-top: 20px;
        font-weight: bold;
    }
    .message {
        background: #ffffffaa;
        padding: 20px;
        border-radius: 12px;
        margin-top: 25px;
        font-size: 26px;
        line-height: 1.8;
    }
    .notes-box {
        margin-top: 25px;
        background: white;
        padding: 20px;
        border-radius: 12px;
        text-align: right;
        font-size: 24px;
    }
    textarea {
        width: 100%;
        height: 110px;
        border-radius: 10px;
        border: none;
        padding: 14px;
        margin-top: 10px;
        font-size: 22px;
    }
    button {
        width: 100%;
        padding: 16px;
        border: none;
        border-radius: 10px;
        background: #ff5fa2;
        color: white;
        font-size: 26px;
        margin-top: 12px;
        font-weight: bold;
    }
    #notesList div {
        font-size: 24px;
        padding: 8px 0;
    }
</style>

</head>
<body>

<h1>For My Boo ğŸ’—</h1>

<div class="counter" id="counter"></div>

<div class="message" id="dailyMessage"></div>

<!-- Ø²Ø± Ø§Ù„ØªØ³Ø¬ÙŠÙ„ -->
<button id="recordBtn">ğŸ¤ ØªØ³Ø¬ÙŠÙ„ ØµÙˆØªÙŠ</button>
<button id="playBtn">â–¶ï¸ ØªØ´ØºÙŠÙ„ Ø§Ù„ØªØ³Ø¬ÙŠÙ„</button>
<a id="downloadLink" style="display:none;">ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØªØ³Ø¬ÙŠÙ„</a>

<div class="notes-box">
    <h3 style="font-size:28px;">Ù…Ù„Ø§Ø­Ø¸Ø§ØªÙƒ ğŸ“</h3>
    <div id="notesList"></div>

    <textarea id="noteInput" placeholder="Ø£ÙƒØªØ¨ÙŠ Ù…Ù„Ø§Ø­Ø¸Ø© Ù‡Ù†Ø§â€¦"></textarea>
    <button onclick="addNote()">Ø¥Ø¶Ø§ÙØ© Ù…Ù„Ø§Ø­Ø¸Ø©</button>
</div>

<script>
/* Ø±Ø³Ø§Ø¦Ù„ ÙŠÙˆÙ…ÙŠØ© */
const messages = [
    "Ø¹Ù„Ø§Ø¨Ø§Ù„Ùƒ Ø´ÙˆØ§ ÙƒÙ†Ø¯ÙŠØ± Ø¯Ø±Ùƒ ØŸ Ù†Ø®Ù…Ù… ÙÙŠÙƒğŸ’­ğŸ’—",
    "Ù„ÙˆÙƒØ§Ù† Ø¬ÙŠØª Ù‚Ø·Ø© ØªÚ¤ÙˆÙ„ÙŠ pspsps ğŸ™„ğŸ˜”",
    "Ù†ØªØ§ Ø£Ø¬Ù…Ù„ Ø­Ø§Ø¬Ø© ØµØ±Ø§ØªÙ„ÙŠ ğŸ«¶ğŸ»â¤ï¸",
    "Ø¹Ø¬Ø¨ØªÙƒ l'app Ù‡Ø§Ø¯ÙŠØŸ Ø¯Ø±ØªÙ‡Ø§ Ø¨Ø§Ø´ Ù†ÙØ±Ø­Ùƒ ğŸ©·",
    "Ù†Ø­Ø¨Ùƒ Ù…Ø§Ù… Ù…Ù†Ú¤ÙˆÙ„Ù‡Ø§Ø´ ÙƒÙ„ Ù†Ù‡Ø§Ø± ğŸ˜­ğŸ’—",
    "Bcc coucou saha 3idkom ğŸ˜‚ğŸ˜‚ Ù…Ø¹Ù„Ø§Ø¨Ø§Ù„ÙŠØ´ Ù„Ù…Ø§Ù‡ ÙƒØªØ¨ØªÙ‡Ø§",
    "Ù†Ù‡Ø§Ø± Ù„ÙŠ Ø¹Ø±ÙØªÙƒ ÙÙŠÙ‡ Ù…Ù†Ø³ÙŠØªÙˆØ´ ÙŠØ¨Ø§Ù† ÙƒØ§Ù† Ù„Ø¨Ø§Ø±Ø­ ğŸ˜©",
    "Ø´ÙˆØ§ Ú¤Ø§Ø¹Ø¯ Ø¯ÙŠØ±ØŸ ØªÙˆØ­Ø´ØªÙŠÙ†ÙŠ ğŸ™„",
    "Ù„ÙˆÙƒØ§Ù† Ù†ØªØ®Ø§ØµÙ…Ùˆ ØªØ³ÙˆØ¨Ø±ÙŠÙ…ÙŠ for my boo ÙˆÙ„Ø§ ØªØ®Ù„ÙŠÙ‡Ø§ ğŸ¤§",
    "Ø§ÙˆÙ„ Ù…Ø±Ø© Ù†Ø¯ÙŠØ± app ÙØ­ÙŠØ§ØªÙŠ ÙˆØ¯Ø±ØªÙ‡Ø§ Ø¹Ù„Ù‰ Ø¬Ø§Ù„Ùƒ ğŸ˜”ğŸ’—",
    "Ily !ğŸ©· Ø§Ø®ØªØµØ§Ø± I love you ğŸ˜¬ğŸ––ğŸ»",
    "ØªØ¹Ø¬Ø¨Ùƒ ÙƒÙ„Ù…Ø© best friendØŸ Ù†ØªØ§ best friend ØªØ§Ø¹ÙŠ ğŸ£",
    "ÙƒÙˆØªÙŠ ÙƒÙˆØªÙŠ ÙŠØ§ Ø®Ù„Ø§ØµÙˆ ğŸ‘¶ğŸ»",
    "Ù…Ù„Ú¤ÙŠØªØ´ Ø´ÙˆØ§ Ù†Ú¤ÙˆÙ„Ùƒ Ù„ÙŠÙˆÙ… ğŸ˜¬",
    "Ù„ÙˆÙƒØ§Ù† Ø¬ÙŠØª ÙØ±Ø§Ø´Ø© ØªØµÙŠØ¯Ù†ÙŠØŸ ğŸ˜‘",
    "Ú¤Ø¯Ø§Ù‡ Ø¹Ù…Ø±Ù†Ø§ Ù„ÙŠÙˆÙ… ØŸ Ø¬Ø§ÙˆØ¨ ÙÙ„Ù†Ø³Ø·Ø§ ğŸ™„",
    "ÙƒÙŠ ØªØºÙ…Ø¶ Ø¹ÙŠÙ†ÙŠÙƒ ÙˆØªØ´ÙˆÙ 2046ØŒ ØªÙ„Ù‚Ø§Ù†ÙŠ Ù…Ø¹Ø§ÙƒØŸ"
];

let today = new Date();
let index = today.getDate() % messages.length;
document.getElementById("dailyMessage").innerHTML = messages[index];

/* Ø­Ø³Ø§Ø¨ Ø§Ù„ÙØ±Ù‚ Ø¨Ø¯Ù‚Ø© */
function calculateExactDifference(startDate, endDate) {
    let years = endDate.getFullYear() - startDate.getFullYear();
    let months = endDate.getMonth() - startDate.getMonth();
    let days = endDate.getDate() - startDate.getDate();

    if (days < 0) {
        months--;
        let prevDays = new Date(endDate.getFullYear(), endDate.getMonth(), 0).getDate();
        days += prevDays;
    }

    if (months < 0) {
        years--;
        months += 12;
    }

    return { years, months, days };
}

/* Ø§Ù„Ø¨Ø¯Ø§ÙŠØ© = Ø§Ù„ÙŠÙˆÙ… - 2 Ø³Ù†Ø© - 6 Ø£Ø´Ù‡Ø± - 6 Ø£ÙŠØ§Ù… */
let startDate = new Date();
startDate.setFullYear(startDate.getFullYear() - 2);
startDate.setMonth(startDate.getMonth() - 6);
startDate.setDate(startDate.getDate() - 6);

function updateCounter() {
    let now = new Date();
    let diff = calculateExactDifference(startDate, now);

    document.getElementById("counter").innerHTML =
        `${diff.years} Ø³Ù†Ø© â€¢ ${diff.months} Ø£Ø´Ù‡Ø± â€¢ ${diff.days} Ø£ÙŠØ§Ù…`;
}

updateCounter();

/* ØªØ­Ø¯ÙŠØ« ÙƒÙ„ ÙŠÙˆÙ… */
setInterval(updateCounter, 1000 * 60 * 60 * 24);

/* Ø§Ù„Ù…Ù„Ø§Ø­Ø¸Ø§Øª */
function loadNotes() {
    let notes = localStorage.getItem("notes");
    if (!notes) return;

    notes = JSON.parse(notes);
    let list = document.getElementById("notesList");
    list.innerHTML = "";

    notes.forEach(n => {
        let div = document.createElement("div");
        div.innerText = "â€¢ " + n;
        list.appendChild(div);
    });
}

function addNote() {
    let text = document.getElementById("noteInput").value.trim();
    if (!text) return;

    let notes = localStorage.getItem("notes");
    notes = notes ? JSON.parse(notes) : [];

    notes.push(text);
    localStorage.setItem("notes", JSON.stringify(notes));

    document.getElementById("noteInput").value = "";
    loadNotes();
}

loadNotes();

/* Ø²Ø± Ø§Ù„ØªØ³Ø¬ÙŠÙ„ */
let mediaRecorder;
let audioChunks = [];
let audioBlob;

document.getElementById("recordBtn").onclick = async () => {
    if (!mediaRecorder || mediaRecorder.state === "inactive") {
        let stream = await navigator.mediaDevices.getUserMedia({ audio: true });
        mediaRecorder = new MediaRecorder(stream);

        audioChunks = [];
        mediaRecorder.ondataavailable = e => audioChunks.push(e.data);

        mediaRecorder.onstop = () => {
            audioBlob = new Blob(audioChunks, { type: "audio/webm" });
            let audioURL = URL.createObjectURL(audioBlob);

            // Ø­ÙØ¸ Ø§Ù„ØªØ³Ø¬ÙŠÙ„
            let reader = new FileReader();
            reader.readAsDataURL(audioBlob);
            reader.onloadend = () => {
                localStorage.setItem("savedAudio", reader.result);
            };

            let link = document.getElementById("downloadLink");
            link.href = audioURL;
            link.download = "my_recording.webm";
            link.style.display = "block";
            link.textContent = "ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØªØ³Ø¬ÙŠÙ„";
        };

        mediaRecorder.start();
        document.getElementById("recordBtn").textContent = "â¹ï¸ Ø¥ÙŠÙ‚Ø§Ù Ø§Ù„ØªØ³Ø¬ÙŠÙ„";
    }
    else if (mediaRecorder.state === "recording") {
        mediaRecorder.stop();
        document.getElementById("recordBtn").textContent = "ğŸ¤ ØªØ³Ø¬ÙŠÙ„ ØµÙˆØªÙŠ";
    }
};

/* ØªØ´ØºÙŠÙ„ Ø§Ù„ØªØ³Ø¬ÙŠÙ„ */
document.getElementById("playBtn").onclick = () => {
    let saved = localStorage.getItem("savedAudio");
    if (!saved) {
        alert("Ù„Ø§ ÙŠÙˆØ¬Ø¯ ØªØ³Ø¬ÙŠÙ„ Ù…Ø­ÙÙˆØ¸!");
        return;
    }
    let audio = new Audio(saved);
    audio.play();
};
</script>

</body>
</html>
